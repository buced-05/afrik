{% extends "admin/base_site.html" %}
{% load static i18n admin_urls admin_list %}

{% block extrastyle %}{{ block.super }}
<link rel="stylesheet" href="{% static "admin/css/changelists.css" %}">
{% if cl.formset %}
    <link rel="stylesheet" href="{% static "admin/css/forms.css" %}">
{% endif %}
{% if cl.formset or action_form %}
    <script src="{% url 'admin:jsi18n' %}"></script>
{% endif %}
{{ media.css }}
{% if not actions_on_top and not actions_on_bottom %}
    <style>
      #changelist table thead th:first-child {width: inherit}
    </style>
{% endif %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* Page Header pour changelist */
    .list-page-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 32px 40px;
        margin: -32px -32px 32px -32px;
        color: white;
        border-radius: 0;
        position: relative;
        overflow: hidden;
    }
    
    .list-page-header::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: rotate 20s linear infinite;
    }
    
    @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    
    .list-page-title {
        font-size: 2rem;
        font-weight: 900;
        color: white;
        margin: 0 0 8px 0;
        letter-spacing: -0.02em;
        text-shadow: 0 4px 8px rgba(0,0,0,0.2);
        position: relative;
        z-index: 1;
    }
    
    .list-page-subtitle {
        color: rgba(255,255,255,0.95);
        font-size: 1rem;
        margin: 0;
        font-weight: 400;
        position: relative;
        z-index: 1;
    }
    
    /* Content Container */
    #content {
        max-width: 1400px !important;
        margin: 0 auto !important;
        padding: 32px !important;
    }
    
    /* Changelist Container */
    #changelist {
        background: var(--bg-card);
        border-radius: 20px;
        padding: 32px;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border-color);
        margin-bottom: 32px;
    }
    
    /* Toolbar */
    #toolbar {
        background: var(--bg-secondary);
        padding: 20px 24px;
        border-radius: 16px;
        margin-bottom: 24px;
        border: 2px solid var(--border-color);
        display: flex;
        align-items: center;
        gap: 16px;
        flex-wrap: wrap;
    }
    
    #toolbar form {
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
        background: transparent;
        padding: 0;
        margin: 0;
    }
    
    #searchbar {
        flex: 1;
        max-width: 500px;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        padding: 12px 16px;
        font-size: 0.9375rem;
        background: var(--bg-card);
        color: var(--text-primary);
        transition: var(--transition);
    }
    
    #searchbar:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    /* Object Tools */
    .object-tools {
        margin: 0 !important;
        padding: 0 !important;
        list-style: none !important;
        display: flex;
        gap: 12px;
        align-items: center;
    }
    
    .object-tools li {
        list-style: none !important;
        margin: 0 !important;
    }
    
    .object-tools a,
    .addlink {
        background: var(--gradient-1);
        padding: 12px 24px;
        border-radius: 12px;
        color: white;
        font-weight: 600;
        text-decoration: none;
        font-size: 0.9375rem;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }
    
    .object-tools a:hover,
    .addlink:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        color: white;
    }
    
    /* Table Styles */
    #changelist table {
        width: 100%;
        border-collapse: collapse;
        background: var(--bg-card);
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid var(--border-color);
    }
    
    #changelist thead th {
        background: var(--bg-secondary);
        padding: 16px 20px;
        text-align: left;
        font-weight: 700;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-size: 0.8125rem;
        border-bottom: 2px solid var(--border-color);
        position: sticky;
        top: 0;
        z-index: 10;
    }
    
    #changelist thead th a {
        color: var(--text-secondary);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: var(--transition);
    }
    
    #changelist thead th a:hover {
        color: var(--primary);
    }
    
    #changelist tbody tr {
        border-bottom: 1px solid var(--border-color);
        transition: var(--transition);
    }
    
    #changelist tbody tr:hover {
        background: var(--table-hover);
        transform: scale(1.01);
    }
    
    #changelist tbody td {
        padding: 20px;
        color: var(--text-primary);
        font-size: 0.9375rem;
        font-weight: 500;
    }
    
    #changelist tbody td a {
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
        transition: var(--transition);
    }
    
    #changelist tbody td a:hover {
        color: var(--primary-dark);
        text-decoration: underline;
    }
    
    /* Filters Sidebar */
    #changelist-filter {
        background: var(--bg-card);
        border-radius: 20px;
        box-shadow: var(--shadow-md);
        padding: 24px;
        border: 1px solid var(--border-color);
        margin-bottom: 32px;
    }
    
    #changelist-filter h2 {
        background: var(--bg-secondary);
        color: var(--text-primary);
        padding: 16px 20px;
        border-radius: 12px;
        margin: -24px -24px 20px -24px;
        font-size: 0.875rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        border-bottom: 2px solid var(--border-color);
    }
    
    #changelist-filter h3 {
        color: var(--text-primary);
        font-weight: 700;
        margin-top: 20px;
        margin-bottom: 12px;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
    
    #changelist-filter a {
        color: var(--text-secondary);
        padding: 10px 16px;
        border-radius: 10px;
        display: block;
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
        transition: var(--transition);
        margin-bottom: 4px;
    }
    
    #changelist-filter a:hover {
        background: var(--bg-secondary);
        color: var(--primary);
        padding-left: 20px;
    }
    
    #changelist-filter li.selected a {
        background: rgba(37, 99, 235, 0.1);
        color: var(--primary);
        border-left: 3px solid var(--primary);
        font-weight: 600;
    }
    
    /* Actions Bar */
    .actions {
        background: var(--bg-secondary);
        padding: 20px 24px;
        border-radius: 16px;
        margin: 24px 0;
        border: 2px solid var(--border-color);
        display: flex;
        align-items: center;
        gap: 16px;
        flex-wrap: wrap;
    }
    
    .actions select {
        padding: 10px 16px;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        background: var(--bg-card);
        color: var(--text-primary);
        font-size: 0.9375rem;
        font-weight: 500;
    }
    
    .actions button {
        padding: 10px 20px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 12px;
        font-weight: 600;
        font-size: 0.9375rem;
        cursor: pointer;
        transition: var(--transition);
    }
    
    .actions button:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
    
    /* Pagination */
    .paginator {
        margin: 32px 0;
        text-align: center;
        padding: 24px;
        background: var(--bg-card);
        border-radius: 16px;
        border: 1px solid var(--border-color);
    }
    
    .paginator a,
    .paginator span {
        display: inline-block;
        padding: 10px 16px;
        margin: 0 4px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.875rem;
        border: 2px solid var(--border-color);
        transition: var(--transition);
    }
    
    .paginator a {
        background: var(--bg-secondary);
        color: var(--text-primary);
    }
    
    .paginator a:hover {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        transform: translateY(-2px);
    }
    
    .paginator .this-page {
        background: var(--gradient-1);
        color: white;
        font-weight: 700;
        border-color: var(--primary);
    }
    
    /* Results Count */
    #changelist-filter + #changelist,
    #changelist {
        margin-top: 0;
    }
    
    .results {
        background: var(--bg-secondary);
        padding: 16px 24px;
        border-radius: 12px;
        margin-bottom: 20px;
        color: var(--text-secondary);
        font-size: 0.875rem;
        font-weight: 500;
        border: 1px solid var(--border-color);
    }
    
    /* Responsive */
    @media (max-width: 1024px) {
        #content {
            padding: 20px !important;
        }
        
        #changelist {
            padding: 24px !important;
        }
        
        .list-page-header {
            padding: 24px !important;
        }
        
        .list-page-title {
            font-size: 1.5rem !important;
        }
    }
    
    @media (max-width: 768px) {
        #toolbar {
            flex-direction: column;
            align-items: stretch;
        }
        
        #searchbar {
            max-width: 100%;
        }
        
        #changelist table {
            font-size: 0.875rem;
        }
        
        #changelist thead th,
        #changelist tbody td {
            padding: 12px !important;
        }
    }
</style>
{% endblock %}

{% block extrahead %}
{{ block.super }}
{{ media.js }}
<script src="{% static 'admin/js/filters.js' %}" defer></script>
{% endblock %}

{% block bodyclass %}{{ block.super }} app-{{ opts.app_label }} model-{{ opts.model_name }} change-list{% endblock %}

{% if not is_popup %}
{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=cl.opts.app_label %}">{{ cl.opts.app_config.verbose_name }}</a>
&rsaquo; {{ cl.opts.verbose_name_plural|capfirst }}
</div>
{% endblock %}
{% endif %}

{% block coltype %}{% endblock %}

{% block content %}
<div class="list-page-header">
    <h1 class="list-page-title">{{ cl.opts.verbose_name_plural|capfirst }}</h1>
    <p class="list-page-subtitle">{% trans 'Manage and view all' %} {{ cl.opts.verbose_name_plural|lower }}</p>
</div>

<div id="content-main">
{% block object-tools %}
    <ul class="object-tools">
      {% block object-tools-items %}
        {% change_list_object_tools %}
      {% endblock %}
    </ul>
{% endblock %}

{% if cl.formset and cl.formset.errors %}
    <p class="errornote">
    {% if cl.formset.errors|length == 1 %}{% translate "Please correct the error below." %}{% else %}{% translate "Please correct the errors below." %}{% endif %}
    </p>
    {{ cl.formset.non_form_errors }}
{% endif %}

<div id="changelist" class="module{% if cl.has_filters %} filtered{% endif %}" data-admin-utc-offset="{% now "Z" %}">
{% block search %}{% search_form cl %}{% endblock %}

{% block date_hierarchy %}{% if cl.date_hierarchy %}{% date_hierarchy cl %}{% endif %}{% endblock %}

{% block filters %}
{% if cl.has_filters %}
<div id="changelist-filter">
  <h2>{% translate 'Filter' %}</h2>
  {% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}
</div>
{% endif %}
{% endblock %}

<form id="changelist-form" method="post"{% if cl.formset and cl.formset.is_multipart %} enctype="multipart/form-data"{% endif %} novalidate>{% csrf_token %}

{% if cl.formset %}
  <div>{{ cl.formset.management_form }}</div>
{% endif %}

{% block result_list %}
  {% if cl.formset %}
    <p class="paginator">
      {% if cl.result_count == cl.full_result_count %}
        {% blocktranslate count counter=cl.result_count %}{{ counter }} result{% plural %}{{ counter }} results{% endblocktranslate %}
      {% else %}
        {% blocktranslate count counter=cl.result_count %}{{ counter }} result{% plural %}{{ counter }} results{% endblocktranslate %} 
        {% blocktranslate count counter=cl.full_result_count %} (of {{ counter }} total){% plural %} (of {{ counter }} total){% endblocktranslate %}
      {% endif %}
    </p>
  {% endif %}
  {% result_list cl %}
  {% if action_form and actions_on_bottom and cl.show_admin_actions %}{% admin_actions %}{% endif %}
{% endblock %}

{% block pagination %}{% pagination cl %}{% endblock %}

</form>
</div>
</div>
{% endblock %}

